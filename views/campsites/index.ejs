<% layout('layouts/boilerplate') %>
<div id="map" style="width: 100%; height: 500px"></div>
<div class="container">
  <h1>All Our Campsites</h1>
    <a href="/campsites/new">Add Campsite</a>
  <ul>
    <% for (let campsite of campsites) { %>
      <div class="card" mb-3>
        <div class="row">
          <div class="col-md-4">
            <% if(campsite.images.length) {%>
            <img class="img-fluid" src="<%= campsite.images[0].url%>">
          <img class="img-fluid" alt=""
            src="https://res.cloudinary.com/ruscarelysc/image/upload/v1650282207/CampHere/lule8myamy2lb6u2xqum.jpg">
          <% } %>
          </div>
          <div class="col-md-8">
            <div class="card-body">
              <h5 class="card-title">
                <%= campsite.title %>
              </h5>
              <h5 class="card-title">
                <%= campsite.properties.popUpMarkup %>
              </h5>
              <p class="card-text">
                <%= campsite.description %>
              </p>
              <p class="card-text">
                <small class="text-muted">
                  <%= campsite.location %>
                </small>
              </p>
              <a class="btn btn-sm btn-primary" href="/campsites/<%= campsite._id %>">View <%= campsite.title %></a>
            </div>
          </div>
        </div>
      </div>

 <%  } %>
</div>

<script>
  const mapToken = '<%-process.env.MAPBOX_TOKEN%>';
  const campsites = { features: <%-JSON.stringify(campsites)%>}
</script>

<script src="/js/clusterMap.js"></script>
